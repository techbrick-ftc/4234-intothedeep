<html>
<head>
<title>PermissionValidatorWrapper.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
PermissionValidatorWrapper.java</font>
</center></td></tr></table>
<pre><span class="s0">/* 
 * Copyright (c) 2018 Craig MacFarlane 
 * 
 * All rights reserved. 
 * 
 * Redistribution and use in source and binary forms, with or without modification, are permitted 
 * (subject to the limitations in the disclaimer below) provided that the following conditions are 
 * met: 
 * 
 * Redistributions of source code must retain the above copyright notice, this list of conditions 
 * and the following disclaimer. 
 * 
 * Redistributions in binary form must reproduce the above copyright notice, this list of conditions 
 * and the following disclaimer in the documentation and/or other materials provided with the 
 * distribution. 
 * 
 * Neither the name of Craig MacFarlane nor the names of its contributors may be used to 
 * endorse or promote products derived from this software without specific prior written permission. 
 * 
 * NO EXPRESS OR IMPLIED LICENSES TO ANY PARTY'S PATENT RIGHTS ARE GRANTED BY THIS LICENSE. THIS 
 * SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED 
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS 
 * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES 
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, 
 * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF 
 * THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 
 */</span>
<span class="s2">package </span><span class="s1">org</span><span class="s3">.</span><span class="s1">firstinspires</span><span class="s3">.</span><span class="s1">ftc</span><span class="s3">.</span><span class="s1">robotcontroller</span><span class="s3">.</span><span class="s1">internal</span><span class="s3">;</span>

<span class="s2">import </span><span class="s1">android</span><span class="s3">.</span><span class="s1">Manifest</span><span class="s3">;</span>
<span class="s2">import </span><span class="s1">android</span><span class="s3">.</span><span class="s1">os</span><span class="s3">.</span><span class="s1">Bundle</span><span class="s3">;</span>

<span class="s2">import </span><span class="s1">com</span><span class="s3">.</span><span class="s1">qualcomm</span><span class="s3">.</span><span class="s1">ftcrobotcontroller</span><span class="s3">.</span><span class="s1">R</span><span class="s3">;</span>

<span class="s2">import </span><span class="s1">org</span><span class="s3">.</span><span class="s1">firstinspires</span><span class="s3">.</span><span class="s1">ftc</span><span class="s3">.</span><span class="s1">robotcore</span><span class="s3">.</span><span class="s1">internal</span><span class="s3">.</span><span class="s1">system</span><span class="s3">.</span><span class="s1">Misc</span><span class="s3">;</span>
<span class="s2">import </span><span class="s1">org</span><span class="s3">.</span><span class="s1">firstinspires</span><span class="s3">.</span><span class="s1">ftc</span><span class="s3">.</span><span class="s1">robotcore</span><span class="s3">.</span><span class="s1">internal</span><span class="s3">.</span><span class="s1">system</span><span class="s3">.</span><span class="s1">PermissionValidatorActivity</span><span class="s3">;</span>

<span class="s2">import </span><span class="s1">java</span><span class="s3">.</span><span class="s1">util</span><span class="s3">.</span><span class="s1">ArrayList</span><span class="s3">;</span>
<span class="s2">import </span><span class="s1">java</span><span class="s3">.</span><span class="s1">util</span><span class="s3">.</span><span class="s1">List</span><span class="s3">;</span>

<span class="s2">public class </span><span class="s1">PermissionValidatorWrapper </span><span class="s2">extends </span><span class="s1">PermissionValidatorActivity </span><span class="s3">{</span>

    <span class="s2">private final </span><span class="s1">String TAG </span><span class="s3">= </span><span class="s4">&quot;PermissionValidatorWrapper&quot;</span><span class="s3">;</span>

    <span class="s0">/* 
     * The list of dangerous permissions the robot controller needs. 
     */</span>
    <span class="s2">protected </span><span class="s1">List</span><span class="s3">&lt;</span><span class="s1">String</span><span class="s3">&gt; </span><span class="s1">robotControllerPermissions </span><span class="s3">= </span><span class="s2">new </span><span class="s1">ArrayList</span><span class="s3">&lt;</span><span class="s1">String</span><span class="s3">&gt;() {{</span>
        <span class="s1">add</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">WRITE_EXTERNAL_STORAGE</span><span class="s3">);</span>
        <span class="s1">add</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">READ_EXTERNAL_STORAGE</span><span class="s3">);</span>
        <span class="s1">add</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">CAMERA</span><span class="s3">);</span>
        <span class="s1">add</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">ACCESS_COARSE_LOCATION</span><span class="s3">);</span>
        <span class="s1">add</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">ACCESS_FINE_LOCATION</span><span class="s3">);</span>
        <span class="s1">add</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">READ_PHONE_STATE</span><span class="s3">);</span>
    <span class="s3">}};</span>

    <span class="s2">private final static </span><span class="s1">Class startApplication </span><span class="s3">= </span><span class="s1">FtcRobotControllerActivity</span><span class="s3">.</span><span class="s2">class</span><span class="s3">;</span>

    <span class="s2">public </span><span class="s1">String mapPermissionToExplanation</span><span class="s3">(</span><span class="s2">final </span><span class="s1">String permission</span><span class="s3">) {</span>
        <span class="s2">if </span><span class="s3">(</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">equals</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">WRITE_EXTERNAL_STORAGE</span><span class="s3">)) {</span>
            <span class="s2">return </span><span class="s1">Misc</span><span class="s3">.</span><span class="s1">formatForUser</span><span class="s3">(</span><span class="s1">R</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">permRcWriteExternalStorageExplain</span><span class="s3">);</span>
        <span class="s3">} </span><span class="s2">else if </span><span class="s3">(</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">equals</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">READ_EXTERNAL_STORAGE</span><span class="s3">)) {</span>
            <span class="s2">return </span><span class="s1">Misc</span><span class="s3">.</span><span class="s1">formatForUser</span><span class="s3">(</span><span class="s1">R</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">permRcReadExternalStorageExplain</span><span class="s3">);</span>
        <span class="s3">} </span><span class="s2">else if </span><span class="s3">(</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">equals</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">CAMERA</span><span class="s3">)) {</span>
            <span class="s2">return </span><span class="s1">Misc</span><span class="s3">.</span><span class="s1">formatForUser</span><span class="s3">(</span><span class="s1">R</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">permRcCameraExplain</span><span class="s3">);</span>
        <span class="s3">} </span><span class="s2">else if </span><span class="s3">(</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">equals</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">ACCESS_COARSE_LOCATION</span><span class="s3">)) {</span>
            <span class="s2">return </span><span class="s1">Misc</span><span class="s3">.</span><span class="s1">formatForUser</span><span class="s3">(</span><span class="s1">R</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">permAccessLocationExplain</span><span class="s3">);</span>
        <span class="s3">} </span><span class="s2">else if </span><span class="s3">(</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">equals</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">ACCESS_FINE_LOCATION</span><span class="s3">)) {</span>
            <span class="s2">return </span><span class="s1">Misc</span><span class="s3">.</span><span class="s1">formatForUser</span><span class="s3">(</span><span class="s1">R</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">permAccessLocationExplain</span><span class="s3">);</span>
        <span class="s3">} </span><span class="s2">else if </span><span class="s3">(</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">equals</span><span class="s3">(</span><span class="s1">Manifest</span><span class="s3">.</span><span class="s1">permission</span><span class="s3">.</span><span class="s1">READ_PHONE_STATE</span><span class="s3">)) {</span>
            <span class="s2">return </span><span class="s1">Misc</span><span class="s3">.</span><span class="s1">formatForUser</span><span class="s3">(</span><span class="s1">R</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">permReadPhoneState</span><span class="s3">);</span>
        <span class="s3">}</span>
        <span class="s2">return </span><span class="s1">Misc</span><span class="s3">.</span><span class="s1">formatForUser</span><span class="s3">(</span><span class="s1">R</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">permGenericExplain</span><span class="s3">);</span>
    <span class="s3">}</span>

    <span class="s1">@Override</span>
    <span class="s2">protected void </span><span class="s1">onCreate</span><span class="s3">(</span><span class="s1">Bundle savedInstanceState</span><span class="s3">)</span>
    <span class="s3">{</span>
        <span class="s2">super</span><span class="s3">.</span><span class="s1">onCreate</span><span class="s3">(</span><span class="s1">savedInstanceState</span><span class="s3">);</span>

        <span class="s1">permissions </span><span class="s3">= </span><span class="s1">robotControllerPermissions</span><span class="s3">;</span>
    <span class="s3">}</span>

    <span class="s2">protected </span><span class="s1">Class onStartApplication</span><span class="s3">()</span>
    <span class="s3">{</span>
        <span class="s1">FtcRobotControllerActivity</span><span class="s3">.</span><span class="s1">setPermissionsValidated</span><span class="s3">();</span>
        <span class="s2">return </span><span class="s1">startApplication</span><span class="s3">;</span>
    <span class="s3">}</span>
<span class="s3">}</span>
</pre>
</body>
</html>